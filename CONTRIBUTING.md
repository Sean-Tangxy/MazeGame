# CONTRIBUTING.md

## 项目贡献指南（MazeGame）

本文件说明项目的编码规范、提交与分支策略、资源管理以及新增功能的流程。所有贡献者必须遵守以下规则，以保证代码风格一致、易于维护。

## 一、总体要求

- 语言与标准：使用 C++14。
- 构建环境：Visual Studio 2019/2022（使用 .vcxproj）。
- 渲染库：优先使用 EasyX（若需替代请在 PR 中说明并统一依赖文档）。
- 音频：可以使用系统 API（PlaySound）或第三方库（如 BASS、irrKlang 等），在引入第三方库前需在 Issue/PR 中讨论并添加许可证说明。
- 资源（图片/音频）：放在 `Assets/` 目录下，并在 .gitignore 中排除编译生成的临时文件与二进制大文件（若音频/图片过大，使用外部下载链接并在 README 中记录）。

## 二、代码风格与约定

- 使用 `#pragma once` 作为头文件保护。
- 缩进：4 个空格（不使用制表符）。
- 命名约定：
  - 类名使用 PascalCase，如 `Player`, `ItemManager`。
  - 成员函数使用 camelCase，如 `update()`, `spawnCoin()`。
  - 私有成员使用后缀下划线或 `m_` 前缀（二选一），项目统一采用 `m_` 前缀，如 `m_items`、`m_exit`。
  - 常量使用全大写和下划线，如 `MAX_HP`。
- 智能指针：优先使用 `std::unique_ptr`、`std::shared_ptr`，尽量避免裸指针和手动 `delete`；若必须使用裸指针（如与第三方 API 互操作），请在注释中说明生命周期。
- 保留原有注释：在重构或移动代码时，必须保留原作者的注释块（不可删除）。

## 三、文件与模块组织

- 源文件放在 `MazeGame/` 目录下，头文件与源文件一一对应。
- 新增系统或子模块（如 `AudioManager`, `SceneManager`, `Sprite`, `Camera`）应创建独立目录并在 `MazeGame.vcxproj.filters` 中注册。
- 所有新增 .cpp 文件必须包含 `pch.h`（若项目启用预编译头）。

## 四、资源与动画约定

- 精灵图与动画应通过 `Sprite` / `Animation` 模块解耦，支持帧切换、速度控制与循环/非循环播放。
- 每个可碰撞对象应定义碰撞箱（矩形或圆形），并提供 `getCollisionBox()` 或相似接口返回局部碰撞箱。
- 相机（Camera）模块应支持跟随主角（平滑插值）与全屏固定（Boss 战）。

## 五、输入与 UI

- 游戏主循环需支持暂停（ESC），暂停时停止游戏物理更新并显示模态 UI（背景变暗），提供“继续”“退出”按钮。
- UI 模块应独立，负责按钮、对话框、文本渲染与事件处理。

## 六、测试与调试

- 新增关卡或功能时请同时提供简单的测试场景与说明，确保可在本地重现。
- 提交 PR 前请在本地 Rebuild Solution，确保无编译错误。

## 七、提交规范

- 分支命名：`feature/<短描述>`，`fix/<短描述>`。
- 提交信息：简洁明了，格式为 `模块: 描述`（例如 `Player: add double jump`）。
- PR 描述必须包含实现要点、修改文件列表以及运行和测试步骤。

## 八、常见约束

- 遵循性能原则：避免在主循环中进行大量堆分配/释放，使用对象池或提前分配。
- 兼顾通用性：动画与控制逻辑应尽量与具体资源解耦，便于替换精灵图。

---

如需新增或修改项目级的编码规范（例如 .editorconfig），请在 Issue 中提出并附带示例变更，维护者将合并统一的配置文件。